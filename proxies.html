<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Montes</title>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/fontawesome.css" rel="stylesheet">
    <link href="assets/css/nice-select.css" rel="stylesheet">
    <link href="assets/css/all.min.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/responsive.css" rel="stylesheet">

</head>

<body>
  

    <div class="menu-trigger">
        <i class="fal fa-bars"></i>
    </div>





    <div class="main-section proxy-section">
        <!------ Side-menu warp Start ----->
        <div class="silde-menu">
            <div class="menu-list">
                <ul>
                    <li><a href="task.html"><i id="taskPage"></i><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></a></li>
                    <li><a href="profile.html"><i id="profilePage"></i><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-credit-card"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg></a></li>
                    <li><a href="proxies.html"><i id="proxyPage"></i><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg></a></li>
                    <li><a href="accounts.html"><i id="accountPage"></i><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-users"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg></a></li>
                    <li><a href="setting.html"><i id="settingsPage"></i><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-settings"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></a></li>
                </ul>
            </div>
            <div class="propic">
                <img src="https://cdn.discordapp.com/avatars/215974281341829120/bdf345be1abd2bc4ecc96ea6a560d136.webp?size=256" alt="">
                <p>v0.3.6</p>
            </div>
        </div>
        <!------ Side-menu warp Start ----->

        <div class="main-content-warp">

           <span class="connected"><span class="dot"></span> Connected</span>

        


           <div class="proxies-area">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-4 col-md-12">
                            <div class="proxey-left">
                                <div class="prxey-search-bar">
                                    <div class="proxy-txt">
                                        <div class="prox-txt">
                                            <h4>Proxies</h4>
                                            <span id="proxyListCount"></span>
                                        </div>
                                        <div class="search">
                                            <input type="text" name="" id="" placeholder="Search...">
                                            <button><i class="fal fa-search"></i></button>
                                        </div>
                                        <div class="add-proxy">
                                            <button><i data-toggle="modal" data-target="#popupTwo" class="fal fa-plus"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <div id="proxyLists">

                                </div>
                                
                            </div>
                        </div>
                        <div class="col-lg-8 col-md-12">
                            <div class="proxy-right">
                                <div class="top-bar">
                                    <div id="proxymenu1" class="search-box s-box-2">
                                        <h4 id="proxyName"></h4>
                                       
                                    </div>
                                    <div id="proxymenu2" class="top-list">
                                        <ul>
                                            <li ><a  ><i type="button" id="bubble"><svg style="cursor: pointer;" onclick="checkResponseTime()" id="cloud" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-cloud-lightning"><path d="M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path><polyline points="13 11 9 17 15 17 11 23"></polyline></svg></i></a></li>
                                            <li><a data-toggle="modal" data-target="#popupThree" ><i style="cursor: pointer;"><svg id="proxyTrash" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></i></a></li>
                                            <li><a data-toggle="modal" data-target="#popupOne" ><i type="button"><svg style="cursor: pointer;" id="pen" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg></i></a></li>
                                            <li><a ><i type="button"><svg style="cursor: pointer;" id="arrow" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-minus"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="9" y1="15" x2="15" y2="15"></line></svg></i></a></li>
                                        </ul>
                                    </div>
                    
                                </div>


                                <div class="kit-table-warp table-responsive table-proxy">
                                    <div class="table-scrolly">
                                        <table class="table">
                                            <thead>
                                            <tr>
                                                <th scope="col">Status</th>
                                                <th scope="col">Proxy</th>
                                                <th scope="col">Actions</th>
                                            </tr>
                                            </thead>
                                            <tbody id="proxyTable">
                                             
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
           </div>

        </div>
    </div>







        <!-- Modal -->
        <div class="modal fade modal-one" id="popupOne" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="create-title">
                            <h4>Edit Proxy List</h4>
                        </div>
                        <form action="">
                            <div class="create-from">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="single-form">
                                            <label id="proxyName2" for=""></label>
                                            <div class="textarea-box">
                                                <textarea name="" id="newImport" cols="30" rows="10" placeholder="IP:Port:User:Pass"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="create-btn">
                                    <i id="addProxies" style="cursor: pointer;" data-dismiss="modal"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></i>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>




        <div class="modal fade" id="popupThree" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                            <p id="proxyDeleteList"></p>
                        <div class="delete-sure-btn">
                            <a onclick="deleteList()" data-dismiss="modal" href="">Yes</a>
                            <a data-dismiss="modal" href="">No</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <div class="modal fade modal-one" id="popupTwo" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="create-title">
                            <h4 style="text-align: center;">Add Proxy list</h4>
                            <input style="transform: translate(20%,30%); background: #222222; color: white; text-align: center; border-color: none; border-radius: 7.5px;" type="text" name="" id="" placeholder="Ex: Montes Residential">
                        </div>
                        <div>
                            <i><svg style="bottom: 12.5px; right:12.5px; position: absolute; cursor:pointer" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>






    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <!-- normal script imports etc  -->
    <script src="scripts/jquery.min.js"></script>    
    <script src="scripts/vendor.js"></script>    
    <!-- Insert this line after script imports -->
    <script>if (window.module) module = window.module;</script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/Popper.js"></script>
    <script src="assets/js/jquery.nice-select.min.js"></script>
    <script src="assets/js/jquery.nicescroll.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
        var fs = require('fs')
        var proxies = fs.readFileSync('./proxies.json','utf-8')
        proxies = JSON.parse(proxies)
function checkList(){
    setTimeout(checkList,0)
        if (JSON.stringify(proxies) === '{}'){
            var array = {
                "Default": []
            }
            fs.writeFileSync('proxies.json',JSON.stringify(array))
            location.reload(true)
        }
    }
    checkList()

        var keys = Object.keys(proxies);
        function buildList(element){
		var table = document.getElementById('proxyTable')
        table.innerHTML = ''
        var list = proxies[element.innerHTML.split('h4>')[1].split('<')[0]]
        document.getElementById('proxyName').innerHTML = element.innerHTML.split('h4>')[1].split('<')[0]
        document.getElementById('proxyName2').innerHTML = element.innerHTML.split('h4>')[1].split('<')[0]
		for (var i = 0; i < list.length; i++){
            
			var row = `<tr>
                                                <th class="bgt-nn">Idle</th>  <!-- bgt-nn txt-wood -->
                                                <td class="rds-left">${list[i]}</td>
                                                <td class="with-bdr text-right">
                                                    <div class="t-list pro-list">
                                                        <ul>
                                                            <li><a ><i><svg style="cursor: pointer;" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></i></a></li>
                                                        </ul>
                                                    </div>
                                                </td>
                                            </tr>`
			table.innerHTML += row
		}
	}
    function buildTable(){
		var table = document.getElementById('proxyTable')
        table.innerHTML = ''
        var list = proxies[keys[0]]
        document.getElementById('proxyName').innerHTML = keys[0]
        document.getElementById('proxyName2').innerHTML = keys[0]
		for (var i = 0; i < list.length; i++){
            
			var row = `<tr>
                                                <th class="bgt-nn">Idle</th>  <!-- bgt-nn txt-wood -->
                                                <td class="rds-left">${list[i]}</td>
                                                <td class="with-bdr text-right">
                                                    <div class="t-list pro-list">
                                                        <ul>
                                                            <li><a><i><svg style="cursor: pointer;" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></i></a></li>
                                                        </ul>
                                                    </div>
                                                </td>
                                            </tr>`
			table.innerHTML += row
		}
	}
    buildTable()
    var table = document.getElementById('proxyLists')
    for(var i=0; i < keys.length; i++){
    var newDiv = document.createElement('h4');
    var count = document.createElement('button');
    var div = document.createElement('div')
    var first = document.createElement("div")
    first.onclick = function(){buildList(this)}
    first.classList.add("proxy-search-result")
    div.classList.add("proxy-item")
    first.appendChild(div)
    newDiv.innerHTML = keys[i]
    count.innerHTML = proxies[keys[i]].length
    table.appendChild(first)
   div.appendChild(newDiv);
   div.appendChild(count)
}
function proxyListNum(){
   document.getElementById('proxyListCount').innerHTML = '('+ keys.length + ' total)'
}
proxyListNum()


$( "#addProxies" ).click(function() {
    var proxyList = document.getElementById('proxyName2').innerHTML
    var list = proxies[proxyList]
    var imported = document.getElementById('newImport').value
    JSON.stringify(imported).replace(/\\r/g, "")
    var newList = imported.split('\n')
    
    var combined = list.concat(newList)

    proxies[proxyList] = combined
  fs.writeFileSync('proxies.json', JSON.stringify(proxies).replace(/\\r/g, ""))
  location.reload(true)
});

function deleteList (){
    var proxyList = document.getElementById('proxyName2').innerHTML
    delete proxies[proxyList]
    fs.writeFileSync('proxies.json', JSON.stringify(proxies))
    location.reload(true)
}
function areYouSure(){
document.getElementById('proxyDeleteList').innerHTML = 'Are you sure you want to delete the ' +'"'+document.getElementById('proxyName2').innerHTML +'" proxy list?'
setTimeout(areYouSure,0)
}
areYouSure()
function format(proxy){
  var validProxies;
      if(proxy.length > 0){
               proxySplit = proxy.split(':');
                  if(proxySplit.length > 3){
                      validProxies = `http://${proxySplit[2]}:${proxySplit[3]}@${proxySplit[0]}:${proxySplit[1]}`
                  } else {
                      validProxies = `http://${proxySplit[0]}:${proxySplit[1]}`
                  }
      }
      return validProxies
}
const fetch = require('node-fetch');
var HttpsProxyAgent = require('https-proxy-agent');
const {performance} = require('perf_hooks')
  
async function checkResponseTime() {
   var table = document.getElementById('proxyTable')
   for (var r = 0; r < table.rows.length; r++){
    var baseValue = (table.rows[r].cells[1].textContent.trim());
    let time1 = await performance.now();
     await  fetch("http://google.com:80", {
  "headers": {
    "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
    "accept-language": "ti,en-US;q=0.9,en;q=0.8",
    "upgrade-insecure-requests": "1",
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.114 Safari/537.36'
  },
  "referrerPolicy": "strict-origin-when-cross-origin",
  "body": null,
  "method": "GET",
  "agent" : new HttpsProxyAgent(format(baseValue)),
  "mode": "cors"
})
    .then(res => res.text())
    .then(text => console.log(text))
    //.catch(err => console.log(err),var baseValue2 = table.rows[r].cells[0].textContent = end)
    .catch((error) => {
        alert(error)
        //var baseValue2 = table.rows[r].cells[0].textContent = 'Failed'
    })
    time2 = await performance.now()
       var end = time2 - time1
      if (end < 300){
        var baseValue2 = table.rows[r].cells[0].textContent = JSON.stringify(end).split('.')[0] +' ms'
        table.rows[r].cells[0].style.color = '#32CD32'
      await sleep(100)
      }
      if (end > 300 && end <3000){
        var baseValue2 = table.rows[r].cells[0].textContent = JSON.stringify(end).split('.')[0] +' ms'
        table.rows[r].cells[0].style.color = 'orange'
      await sleep(100)
      }
      else if (end > 3000){
        var baseValue2 = table.rows[r].cells[0].textContent = 'Failed'
        table.rows[r].cells[0].style.color = 'red'
        process.exit()
      }
  }
    } 

function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}
    </script>

</body>

</html>